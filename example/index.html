<!DOCTYPE html>
<html>
<head>
  <title></title>
  <script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
  <script src="thrift.js"></script>
  <script src="gen-js/example_types.js"></script>
  <script src="gen-js/Twitter.js"></script>
  <script type="text/javascript" charset="utf-8">
    function calc() {
      var transport = new Thrift.Transport("http://a-server:9090");
      var protocol  = new Thrift.Protocol(transport);
      var client    = new TwitterClient(protocol);
      
      var tweetObj = {
        userId: parseInt(Math.random()*1000),
        userName: "superwolf",
        text:"hello world!"
      }

      var tweet = new Tweet(tweetObj)

      try {
        result = client.postTweet(tweet);
        $('#result').append(result);
        $('#result').css('color', 'black');
      } catch(ouch){
        $('#result').append(ouch.why);
        $('#result').css('color', 'red');
      }
      var result = client.searchTweets('superwolf');
      console.log(result);
    }
    window.onload = function(){
      $('#postMsg').click(function(){
        calc();
      });
    }
  </script>
</head>
<body>
  <input id="postMsg" value="post msg" type="button" />
  <div id="result"></div>
</body>
</html>
